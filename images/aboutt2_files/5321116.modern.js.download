(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1269:function(t,e,o){"use strict";var r=o(39),n=o(31),c=o(2642),l=o(361),h="ArrayBuffer",d=c.ArrayBuffer;r({global:!0,constructor:!0,forced:n.ArrayBuffer!==d},{ArrayBuffer:d}),l(h)},1721:function(t,e,o){t.exports=o.p+"img/ghost.fe6f69a.png"},1722:function(t,e,o){t.exports=o.p+"img/couple-having-fun-while-shopping.d307412.png"},1723:function(t,e,o){t.exports=o.p+"img/designer.4513f1d.png"},1724:function(t,e,o){t.exports=o.p+"img/pie-chart.4b093f3.png"},2978:function(t,e,o){"use strict";var r={props:{size:{type:String,default:"1em"}}},n=o(7),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("svg",t._b({staticClass:"ui-svg-inline",attrs:{width:t.size,height:t.size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},"svg",t.$attrs,!1),[e("path",{attrs:{d:"M12,16a1,1,0,1,0,1,1A1,1,0,0,0,12,16Zm10.67,1.47-8.05-14a3,3,0,0,0-5.24,0l-8,14A3,3,0,0,0,3.94,22H20.06a3,3,0,0,0,2.61-4.53Zm-1.73,2a1,1,0,0,1-.88.51H3.94a1,1,0,0,1-.88-.51,1,1,0,0,1,0-1l8-14a1,1,0,0,1,1.78,0l8.05,14A1,1,0,0,1,20.94,19.49ZM12,8a1,1,0,0,0-1,1v4a1,1,0,0,0,2,0V9A1,1,0,0,0,12,8Z"}})])}),[],!1,null,null,null);e.a=component.exports},3018:function(t,e,o){"use strict";var r=o(10);o(248);function n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}o(23);var l=o(5293),h=o(2978),d=o(1743),v=o(9),x=(o(38),o(185),o(74),o(1269),o(1172),o(24),o(1211),o(1175),o(1176),o(1177),o(1178),o(3385)),m=t=>{for(var e=atob(t.split(",")[1]),o=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return new Blob([r],{type:o})},f=function(img){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=arguments.length>2?arguments[2]:void 0;return new Promise(((o,r)=>{var n=new FileReader,c=img.name||"image.png";n.readAsDataURL(img),n.onload=function(r){var image=new Image;image.src=r.target.result,image.onload=function(){var canvas=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height;var r=canvas.getContext("2d");r.drawImage(image,0,0,canvas.width,canvas.height);var data=r.getImageData(0,0,canvas.width,canvas.height).data,n={left:0,top:0,width:canvas.width,height:canvas.height};e?n={left:e.x,top:e.y,width:e.width,height:e.height}:t&&(n=Object(x.getBoundingBox)({data:data,width:canvas.width,height:canvas.height})),r.clearRect(0,0,canvas.width,canvas.height),canvas.width=n.width,canvas.height=n.height,r.drawImage(image,n.left,n.top,n.width,n.height,0,0,n.width,n.height);var l=canvas.toDataURL("image/png"),h=m(l);o(new File([h],c,{type:"image/png"}))}},n.onerror=()=>{o(img)}}))},B=o(28);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var w=688,y=400,_={components:{LoadingSmall:d.a,UilExclamationTriangle:h.a},props:{file:{type:Object,default:null},url:{type:String,default:null},imageDetails:{type:Object,default:null},isInvalidUrl:{type:Boolean,default:!1},isInvalidImage:{type:Boolean,default:!1}},data:()=>({isLoading:!1,isSearching:!1,cropBoxPosition:{x:0,y:0,width:100,height:100,padding:24,edgeGap:8,isDragging:!1},canvasTracker:{onClickPointerX:0,onClickPointerY:0,onClickCropBoxX:0,onClickCropBoxY:0,onClickCropBoxWidth:0,onClickCropBoxHeight:0,initialWidth:0,initialHeight:0,resizeCorner:null,distanceXFromCursor:0,distanceYFromCursor:0},imgSrc:null,overlayCanvas:null,originalImageSize:{width:0,height:0},imgHash:null,fullImageHash:null,renderedImage:null,imageLoaded:!1,isCropped:!1,isCropBoxAnimating:!1}),computed:{isInitialCropBox(){var t;return null!==(t=this.imageDetails)&&void 0!==t&&t.width?this.cropBoxPosition.x===this.imageDetails.x&&this.cropBoxPosition.y===this.imageDetails.y&&this.cropBoxPosition.width===this.imageDetails.width&&this.cropBoxPosition.height===this.imageDetails.height:0===this.cropBoxPosition.x&&0===this.cropBoxPosition.y&&this.cropBoxPosition.width===this.canvasTracker.initialWidth&&this.cropBoxPosition.height===this.canvasTracker.initialHeight}},watch:{cropBoxPosition:{deep:!0,handler(){var t;null!==(t=this.imageDetails)&&void 0!==t&&t.width||!this.isInitialCropBox||(this.isCropped=!1),this.updateOverlay(this.cropBoxPosition.x,this.cropBoxPosition.y,this.cropBoxPosition.width,this.cropBoxPosition.height)}},"canvasTracker.resizeCorner"(t){t?document.addEventListener("mousemove",this.onMouseMove):document.removeEventListener("mousemove",this.onMouseMove)},"cropBoxPosition.isDragging"(t){t?document.addEventListener("mousemove",this.onMouseMove):document.removeEventListener("mousemove",this.onMouseMove)}},mounted(){var t=this;return Object(v.a)((function*(){try{if(t.isLoading=!0,t.file)if(t.renderedImage=t.file.file,"image/svg+xml"===t.file.file.type){var e=new FileReader;e.onload=function(){var e=Object(v.a)((function*(e){var o=yield t.getSVGWithSize(e.target.result);t.renderedImage=new Blob([o],{type:"image/svg+xml"}),t.loadImage()}));return function(t){return e.apply(this,arguments)}}(),e.readAsText(t.file.file)}else t.loadImage();else if(t.url){var o=yield fetch(t.url).catch((e=>{t.$emit("update:isInvalidUrl",!0),console.error(e)})),r=o.headers.get("content-type");if("image/svg+xml"===r){var n=yield t.getSVGWithSize(yield o.text());t.renderedImage=new Blob([n],{type:"image/svg+xml"})}else{var c=yield o.blob();t.renderedImage=new Blob([c],{type:r})}t.loadImage()}document.addEventListener("mouseup",t.onMouseUp)}catch(t){return console.error(t),null}}))()},beforeDestroy(){document.removeEventListener("mouseup",this.onMouseUp)},methods:{animateCropBoxSize(){this.isCropBoxAnimating=!0;this.cropBoxPosition.x,this.cropBoxPosition.y;var t=this.cropBoxPosition.width,e=this.cropBoxPosition.height,o=setInterval((()=>{if(this.cropBoxPosition.y=this.cropBoxPosition.y+1,this.cropBoxPosition.width=this.cropBoxPosition.width-1,this.cropBoxPosition.height=this.cropBoxPosition.height-1,this.cropBoxPosition.width<=.8*t&&this.cropBoxPosition.height<=.8*e){clearInterval(o);var r=setInterval((()=>{this.cropBoxPosition.y=this.cropBoxPosition.y-1,this.cropBoxPosition.width=this.cropBoxPosition.width+1,this.cropBoxPosition.height=this.cropBoxPosition.height+1,(this.cropBoxPosition.width>=t||this.cropBoxPosition.height>=e)&&(clearInterval(r),this.isCropBoxAnimating=!1)}),10)}}),10)},loadImage(){var t=new FileReader;t.onload=()=>{this.imgSrc=t.result,this.getImageDimensions()},t.onerror=t=>console.error(t),t.readAsDataURL(this.renderedImage),this.isLoading=!1},getImageDimensions(){var image=this.$refs.image,img=new Image,t=this;img.src=this.imgSrc,img.onload=function(){var e=this.width/this.height,o=w,r=o/e;r>y&&(o=(r=y)*e),0===t.originalImageSize.width&&0===t.originalImageSize.height&&(t.originalImageSize.width=this.width,t.originalImageSize.height=this.height),image.width=o,image.height=r,t.$nextTick((()=>{image.src=t.imgSrc,t.createOverlayCanvas(o,r),t.$store.state.settings.shownCropBoxAnimation||setTimeout((()=>{t.animateCropBoxSize(),t.$store.commit("settings/setShownCropBoxAnimation")}),500)}))}},createOverlayCanvas(t,e){var o,r=this.$refs.overlay;r.width=t,r.height=e,null!==(o=this.imageDetails)&&void 0!==o&&o.width?(this.cropBoxPosition.x=this.imageDetails.x,this.cropBoxPosition.y=this.imageDetails.y,this.cropBoxPosition.width=this.imageDetails.width,this.cropBoxPosition.height=this.imageDetails.height):(this.cropBoxPosition.x=this.cropBoxPosition.padding,this.cropBoxPosition.y=this.cropBoxPosition.padding,this.cropBoxPosition.width=t-2*this.cropBoxPosition.padding,this.cropBoxPosition.height=e-2*this.cropBoxPosition.padding),this.canvasTracker.initialWidth=t,this.canvasTracker.initialHeight=e,this.updateOverlay(this.cropBoxPosition.x,this.cropBoxPosition.y,this.cropBoxPosition.width,this.cropBoxPosition.height)},updateOverlay(t,e,o,r){var n=this.$refs.overlay.getContext("2d");n.clearRect(0,0,this.canvasTracker.initialWidth,this.canvasTracker.initialHeight),n.fillStyle="rgba(0, 0, 0, 0.6)",n.fillRect(0,0,this.canvasTracker.initialWidth,this.canvasTracker.initialHeight),n.clearRect(t,e,o,r)},getSVGWithSize(t){var svg=(new DOMParser).parseFromString(t,"image/svg+xml"),e=svg.documentElement,o=e.viewBox.baseVal,r=1500,n=Math.round(o.width),c=Math.round(o.height);return n<r&&c<r&&(n<c?(n=n*r/c,c=r):c<n?(c=c*r/n,n=r):(n=r,c=r)),e.hasAttribute("width")||e.setAttribute("width",n),e.hasAttribute("height")||e.setAttribute("height",c),(new XMLSerializer).serializeToString(svg)},onMouseDown(t,e){this.isSearching||this.isCropBoxAnimating||(this.canvasTracker.resizeCorner=e,this.canvasTracker.onClickPointerX=t.clientX,this.canvasTracker.onClickPointerY=t.clientY,this.canvasTracker.onClickCropBoxX=this.cropBoxPosition.x,this.canvasTracker.onClickCropBoxY=this.cropBoxPosition.y,this.canvasTracker.onClickCropBoxWidth=this.cropBoxPosition.width,this.canvasTracker.onClickCropBoxHeight=this.cropBoxPosition.height,this.isCropped=!0)},onMouseUp(){this.canvasTracker.resizeCorner=null,this.cropBoxPosition.isDragging&&(this.cropBoxPosition.isDragging=!1,this.canvasTracker.distanceXFromCursor=0,this.canvasTracker.distanceYFromCursor=0),this.canvasTracker.resizeCorner&&(this.canvasTracker.onClickPointerX=0,this.canvasTracker.onClickPointerY=0,this.canvasTracker.onClickCropBoxX=0,this.canvasTracker.onClickCropBoxY=0,this.canvasTracker.onClickCropBoxWidth=0,this.canvasTracker.onClickCropBoxHeight=0)},onMouseMove(t){this.canvasTracker.resizeCorner?this.startResizing(t):this.cropBoxPosition.isDragging&&this.startDragging(t)},initCropBoxDragging(t){this.isSearching||this.isCropBoxAnimating||this.canvasTracker.resizeCorner||(this.cropBoxPosition.isDragging=!0,this.isCropped=!0,this.canvasTracker.distanceXFromCursor=t.clientX-this.cropBoxPosition.x,this.canvasTracker.distanceYFromCursor=t.clientY-this.cropBoxPosition.y,this.startDragging(t))},startDragging(t){var{clientX:e,clientY:o}=t,r=this.cropBoxPosition.x,n=this.cropBoxPosition.y;this.cropBoxPosition.x=e-this.canvasTracker.distanceXFromCursor,this.cropBoxPosition.y=o-this.canvasTracker.distanceYFromCursor,this.cropBoxPosition.x<0&&(this.cropBoxPosition.x=0),this.cropBoxPosition.x+this.cropBoxPosition.width>this.canvasTracker.initialWidth&&(this.cropBoxPosition.x=r,this.cropBoxPosition.width=this.canvasTracker.initialWidth-this.cropBoxPosition.x),this.cropBoxPosition.y<0&&(this.cropBoxPosition.y=0),this.cropBoxPosition.y+this.cropBoxPosition.height>this.canvasTracker.initialHeight&&(this.cropBoxPosition.y=n,this.cropBoxPosition.height=this.canvasTracker.initialHeight-this.cropBoxPosition.y)},startResizing(t){var{clientX:e,clientY:o}=t,r=e-this.canvasTracker.onClickPointerX,n=o-this.canvasTracker.onClickPointerY;switch(this.canvasTracker.resizeCorner){case"topLeft":this.canvasTracker.onClickCropBoxX+r>=0&&this.canvasTracker.onClickCropBoxWidth-r>=100?(this.cropBoxPosition.x=this.canvasTracker.onClickCropBoxX+r,this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth-r):this.canvasTracker.onClickCropBoxX+r<0?(this.cropBoxPosition.x=0,this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth+this.canvasTracker.onClickCropBoxX):this.canvasTracker.onClickCropBoxWidth-r<100&&this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth-r<100&&(this.cropBoxPosition.width=100),this.canvasTracker.onClickCropBoxY+n>=0&&this.canvasTracker.onClickCropBoxHeight-n>=100?(this.cropBoxPosition.y=this.canvasTracker.onClickCropBoxY+n,this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight-n):this.canvasTracker.onClickCropBoxY+n<0?(this.cropBoxPosition.y=0,this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight+this.canvasTracker.onClickCropBoxY):this.canvasTracker.onClickCropBoxHeight-n<100&&this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight-n<100&&(this.cropBoxPosition.height=100);break;case"topRight":this.canvasTracker.onClickCropBoxY+n>=0&&this.canvasTracker.onClickCropBoxHeight-n>=100?(this.cropBoxPosition.y=this.canvasTracker.onClickCropBoxY+n,this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight-n):this.canvasTracker.onClickCropBoxY+n<0?(this.cropBoxPosition.y=0,this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight+this.canvasTracker.onClickCropBoxY):this.canvasTracker.onClickCropBoxHeight-n<100&&this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight-n<100&&(this.cropBoxPosition.height=100),this.canvasTracker.onClickCropBoxWidth+r>=100&&this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth+r<=this.canvasTracker.initialWidth?this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth+r:this.canvasTracker.onClickCropBoxWidth+r<100?this.cropBoxPosition.width=100:this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth+r>this.canvasTracker.initialWidth&&(this.cropBoxPosition.width=this.canvasTracker.initialWidth-this.canvasTracker.onClickCropBoxX);break;case"bottomLeft":this.canvasTracker.onClickCropBoxX+r>=0&&this.canvasTracker.onClickCropBoxWidth-r>=100?(this.cropBoxPosition.x=this.canvasTracker.onClickCropBoxX+r,this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth-r):this.canvasTracker.onClickCropBoxX+r<0?(this.cropBoxPosition.x=0,this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth+this.canvasTracker.onClickCropBoxX):this.canvasTracker.onClickCropBoxWidth-r<100&&this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth-r<100&&(this.cropBoxPosition.width=100),this.canvasTracker.onClickCropBoxHeight+n>=100&&this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight+n<=this.canvasTracker.initialHeight?this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight+n:this.canvasTracker.onClickCropBoxHeight+n<100?this.cropBoxPosition.height=100:this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight+n>this.canvasTracker.initialHeight&&(this.cropBoxPosition.height=this.canvasTracker.initialHeight-this.canvasTracker.onClickCropBoxY);break;case"bottomRight":this.canvasTracker.onClickCropBoxWidth+r>=100&&this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth+r<=this.canvasTracker.initialWidth?this.cropBoxPosition.width=this.canvasTracker.onClickCropBoxWidth+r:this.canvasTracker.onClickCropBoxWidth+r<100?this.cropBoxPosition.width=100:this.canvasTracker.onClickCropBoxX+this.canvasTracker.onClickCropBoxWidth+r>this.canvasTracker.initialWidth&&(this.cropBoxPosition.width=this.canvasTracker.initialWidth-this.canvasTracker.onClickCropBoxX),this.canvasTracker.onClickCropBoxHeight+n>=100&&this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight+n<=this.canvasTracker.initialHeight?this.cropBoxPosition.height=this.canvasTracker.onClickCropBoxHeight+n:this.canvasTracker.onClickCropBoxHeight+n<100?this.cropBoxPosition.height=100:this.canvasTracker.onClickCropBoxY+this.canvasTracker.onClickCropBoxHeight+n>this.canvasTracker.initialHeight&&(this.cropBoxPosition.height=this.canvasTracker.initialHeight-this.canvasTracker.onClickCropBoxY)}},searchByImage(){var t=this;return Object(v.a)((function*(){try{var e,o=new FormData;t.isSearching=!0;var r=Object(B.c)("/api/v2/embedding-vector"),n=null;if(null!==(e=t.file)&&void 0!==e&&e.file?(n=t.file.file,t.file.file&&"image/png"===t.file.file.type&&!t.isCropped&&(n=yield f(n,!0,null)),o.append("file",n)):t.url&&o.append("url",t.url),t.isCropped&&!t.isInitialCropBox){var c,l,h=t.originalImageSize.width/t.canvasTracker.initialWidth,d=t.originalImageSize.height/t.canvasTracker.initialHeight,v={x:t.cropBoxPosition.x*h,y:t.cropBoxPosition.y*d,width:t.cropBoxPosition.width*h,height:t.cropBoxPosition.height*d},x=yield f(t.renderedImage,!1,v);o.delete("file"),o.delete("url"),null!==(c=t.imageDetails)&&void 0!==c&&c.image_path||(n?o.append("image_file",n):o.append("image_url",t.url)),o.append("file",x),o.append("image",JSON.stringify(k({x:parseInt(t.cropBoxPosition.x),y:parseInt(t.cropBoxPosition.y),width:parseInt(t.cropBoxPosition.width),height:parseInt(t.cropBoxPosition.height)},(null===(l=t.imageDetails)||void 0===l?void 0:l.image_path)&&{image_path:t.imageDetails.image_path})))}var m=yield t.$axios.post(r,o,{headers:{"Content-Type":"multipart/form-data"}});t.imgHash=m.data.response.image_hash,t.$emit("searchByImage",k({imageHash:t.imgHash},t.isCropped&&{cropBox:{x:t.cropBoxPosition.x,y:t.cropBoxPosition.y,width:t.cropBoxPosition.width,height:t.cropBoxPosition.height}}))}catch(e){var C,w;t.$sentry.captureException(e);var title=(null===(C=e.response)||void 0===C||null===(w=C.data)||void 0===w?void 0:w.message)||e.message||"Invalid File!";t.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),t.file?t.$emit("update:isInvalidImage",!0):t.url&&t.$emit("update:isInvalidUrl",!0)}finally{t.isSearching=!1}}))()}}},P=_,T=o(4695),O=o(7);var I=Object(O.a)(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("div",{class:["d-flex justify-content-center align-items-center mb-4",t.$style.container]},[t.isLoading?e("div",{class:["m-auto",t.$style.spinner]},[e("loading-small")],1):e("div",{class:t.$style.wrapper},[e("img",{ref:"image",class:t.$style.image,on:{load:function(e){t.imageLoaded=!0}}}),t._v(" "),e("canvas",{ref:"overlay",staticClass:"position-absolute"}),t._v(" "),e("div",{ref:"cropBox",class:t.$style.cropBox,style:{display:t.imageLoaded?"block":"none",left:"".concat(t.cropBoxPosition.x,"px"),top:"".concat(t.cropBoxPosition.y,"px"),width:"".concat(t.cropBoxPosition.width,"px"),height:"".concat(t.cropBoxPosition.height,"px")}},[e("div",{class:t.$style.cropControl,on:{mousedown:t.initCropBoxDragging}},[e("div",{ref:"topLeftCorner",class:[t.$style.corner,t.$style.topLeftOuter],style:{top:"-24px",left:"-24px"},on:{mousedown:function(e){return t.onMouseDown(e,"topLeft")}}},[e("div",{class:[t.$style.cornerInner,t.$style.topLeftInner]})]),t._v(" "),e("div",{ref:"topRightCorner",class:[t.$style.corner,t.$style.topRightOuter],style:{top:"-24px",left:"".concat(t.cropBoxPosition.width-(2*t.cropBoxPosition.edgeGap-2),"px")},on:{mousedown:function(e){return t.onMouseDown(e,"topRight")}}},[e("div",{class:[t.$style.cornerInner,t.$style.topRightInner]})]),t._v(" "),e("div",{ref:"bottomLeftCorner",class:[t.$style.corner,t.$style.bottomLeftOuter],style:{top:"".concat(t.cropBoxPosition.height-(2*t.cropBoxPosition.edgeGap-2),"px"),left:"-24px"},on:{mousedown:function(e){return t.onMouseDown(e,"bottomLeft")}}},[e("div",{class:[t.$style.cornerInner,t.$style.bottomLeftInner]})]),t._v(" "),e("div",{ref:"bottomRightCorner",class:[t.$style.corner,t.$style.bottomRightOuter],style:{top:"".concat(t.cropBoxPosition.height-(2*t.cropBoxPosition.edgeGap-2),"px"),left:"".concat(t.cropBoxPosition.width-(2*t.cropBoxPosition.edgeGap-2),"px")},on:{mousedown:function(e){return t.onMouseDown(e,"bottomRight")}}},[e("div",{class:[t.$style.cornerInner,t.$style.bottomRightInner]})])])])])]),t._v(" "),t.isInvalidUrl||t.isInvalidImage?e("div",{class:["d-flex align-items-center justify-content-center p-3",t.$style.warning]},[e("uil-exclamation-triangle",{staticClass:"mr-2 d-none d-md-block",attrs:{color:"#DE524C",size:"12"}}),t._v(" "),t.isInvalidUrl?e("span",[t._v("Please enter a valid image URL. Example:\n      https://iconscout.com/iconscout_logo-1024x1024.png")]):t._e(),t._v(" "),t.isInvalidImage?e("span",[t._v("Couldn't upload image. Please try again.")]):t._e()],1):t._e(),t._v(" "),e("div",{staticClass:"d-flex justify-content-center"},[e("button",{class:["btn btn-primary mb-4",t.isSearching?"ajax-loading disabled":""],attrs:{disabled:!t.imageLoaded||t.isCropBoxAnimating,type:"button"},on:{click:t.searchByImage}},[t._v("\n      Search by Image\n    ")])])])}),[],!1,(function(t){this.$style=T.default.locals||T.default}),null,null).exports;function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var S={components:{UilLink:l.a,UilExclamationTriangle:h.a,LoadingSmall:d.a,ImageLens:I},props:{showButton:{type:Boolean,default:!1},dragAreaBg:{type:String,default:"transparent"},fromModal:{type:Boolean,default:!1},imageDetails:{type:Object,default:()=>{}}},data(){var t;return{isLoading:!1,isFileSelected:!1,dragenter:!1,isInvalidUrl:!1,isInvalidImage:!1,file:(null===(t=this.imageDetails)||void 0===t?void 0:t.file)||null,inputUrl:null,isImageLoaded:!1}},computed:{imageUrl(){var t;return(null===(t=this.imageDetails)||void 0===t?void 0:t.url)||this.inputUrl&&"https://resizer.services.iconscout.com/?w=auto&h=1000&url=".concat(encodeURIComponent(this.inputUrl))||null},initFrom(){var t,e,o;return null!==(t=this.imageDetails)&&void 0!==t&&t.exampleName?"example-asset":null!==(e=this.imageDetails)&&void 0!==e&&e.image_hash?"existing-image":null!==(o=this.imageDetails)&&void 0!==o&&o.trackingItemObj?"pdp-preview":this.inputUrl?"url":this.isFileSelected?"file-upload":"file-drag"}},watch:{isInvalidUrl(t){t&&(this.inputUrl=null,this.isImageLoaded=!1)},isInvalidImage(t){t&&(this.file=null,this.isImageLoaded=!1)}},mounted(){var t=this.$refs.uploadFileContainer;t&&(t.ondrop=t=>{t.preventDefault(),this.onDrop(t),this.dragenter=!1})},methods:{dragover(t){t.preventDefault(),this.dragenter=!0},dragleave(){this.dragenter=!1},validateUrl(){this.isInvalidUrl=!/\.(png|jpg|jpeg|svg)a*/.test(this.inputUrl),this.isInvalidUrl||(this.isLoading=!0,this.isImageLoaded=!0,this.$emit("imageLoaded"),this.isLoading=!1)},openFileInput(){this.isFileSelected=!0,this.$refs.input.click()},onDrop(t){this.isLoading=!0;var e=t.target.files||t.dataTransfer.files;if(e)this.file=e[0],this.isImageLoaded=!0,this.$emit("imageLoaded"),this.isLoading=!1;else{var title="Please upload valid file format";this.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}},searchByImage(data){var t,e;this.$analytics.track("reverse-image-search",{route_path:this.$route.path,route_name:this.$route.name,action:"search",data:j(j({by:this.initFrom,cropBox:data.cropBox||null},(null===(t=this.imageDetails)||void 0===t?void 0:t.exampleName)&&{exampleAssetName:this.imageDetails.exampleName}),(null===(e=this.imageDetails)||void 0===e?void 0:e.trackingItemObj)&&this.imageDetails.trackingItemObj)}),"reverse-image-search-hash-assets"===this.$route.name?this.$router.push({name:"reverse-image-search-hash-assets",params:{assets:this.$route.params.assets,hash:null==data?void 0:data.imageHash}}):this.$router.push({name:"reverse-image-search-hash-all-assets",params:{hash:null==data?void 0:data.imageHash}}),this.fromModal&&this.$modal.close("modalImageSearch")}}},$=o(4697);var L=Object(O.a)(S,(function(){var t=this,e=t._self._c;return t.isImageLoaded&&!t.isInvalidUrl&&!t.isInvalidImage||t.imageUrl||t.file?e("div",{staticClass:"pt-4"},[e("image-lens",t._b({attrs:{"is-invalid-url":t.isInvalidUrl,"is-invalid-image":t.isInvalidImage},on:{"update:isInvalidUrl":function(e){t.isInvalidUrl=e},"update:is-invalid-url":function(e){t.isInvalidUrl=e},"update:isInvalidImage":function(e){t.isInvalidImage=e},"update:is-invalid-image":function(e){t.isInvalidImage=e},searchByImage:t.searchByImage}},"image-lens",c(c(c({},t.imageDetails&&{imageDetails:t.imageDetails}),t.imageUrl&&{url:t.imageUrl}),t.file&&{file:{file:t.file}}),!1))],1):e("div",{ref:"uploadFileContainer",class:t.$style.container,on:{dragover:t.dragover,dragleave:t.dragleave}},[e("div",{class:[t.$style.wrapper,t.dragenter?t.$style.dragging:null],style:{background:t.dragAreaBg}},[t.isLoading?e("div",{class:["m-auto",t.$style.spinner]},[e("loading-small")],1):e("div",{staticClass:"d-flex flex-column align-items-center"},[e("input",{ref:"input",staticStyle:{display:"none"},attrs:{accept:[".png",".jpg",".jpeg",".svg"],type:"file"},on:{change:t.onDrop}}),t._v(" "),e("img",{class:["mb-5",t.$style.image],attrs:{src:o(262),alt:t.$t("pages.search.image_search"),width:"48",height:"48"}}),t._v(" "),e("div",{staticClass:"text-center mb-5 font-weight-semi-bold"},[t._v("\n        Drag & drop an image or "),e("br"),t._v(" "),t.showButton?e("button",{staticClass:"btn btn-primary mt-4",attrs:{type:"button"},on:{click:t.openFileInput}},[t._v("\n          Upload an image\n        ")]):e("a",{class:["btn btn-zero",t.$style.uploadInput],attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openFileInput.apply(null,arguments)}}},[t._v("upload an image")])]),t._v(" "),e("div",{class:["mb-5",t.$style.urlInput]},[e("uil-link",{class:t.$style.linkIcon,attrs:{color:"black",size:"16"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputUrl,expression:"inputUrl",modifiers:{trim:!0}}],staticClass:"form-control form-control-sm",attrs:{placeholder:"Paste image url",type:"text"},domProps:{value:t.inputUrl},on:{input:[function(e){e.target.composing||(t.inputUrl=e.target.value.trim())},t.validateUrl],blur:function(e){return t.$forceUpdate()}}})],1),t._v(" "),t.isInvalidUrl||t.isInvalidImage?e("div",{class:["d-flex align-items-center text-center",t.$style.warning]},[e("uil-exclamation-triangle",{staticClass:"mr-2 d-none d-md-block",attrs:{color:"#DE524C",size:"12"}}),t._v(" "),e("div",{staticClass:"d-flex flex-column"},[t.isInvalidUrl?e("span",[t._v("Please enter a valid image URL. Example:\n            https://iconscout.com/iconscout_logo-1024x1024.png")]):t._e(),t._v(" "),t.isInvalidImage?e("span",[t._v("Couldn't upload image. Please try again.")]):t._e()])],1):t._e(),t._v(" "),e("div",{class:t.$style.informativeText},[t._v("\n        JPG, PNG, or SVG; Max file size: 10 MB, Min dimensions: 200 x 200 px\n      ")])])])])}),[],!1,(function(t){this.$style=$.default.locals||$.default}),null,null);e.a=L.exports},3023:function(t,e,o){"use strict";var r=o(10),n=o(110);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={components:{LoadingSmall:o(1743).a},props:{width:{type:Number,default:144},height:{type:Number,default:140},location:{type:String,required:!0}},data:()=>({assets:[{name:"Ghost",url:o(1721)},{name:"Couple Having Fun While Shopping",url:o(1722)},{name:"Designer",url:o(1723)},{name:"Business",url:o(1724)}],loadingIndex:-1}),methods:{onImageSearch(t){this.$emit("selectExample",l(l({},t),{},{name:Object(n.a)(t.name)})),this.loadingIndex=-1}}},d=o(4699),v=o(7);var component=Object(v.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-center"},t._l(t.assets,(function(o,r){return e("div",{key:r,class:["p-3",t.$style.assetCard],style:{width:"".concat(t.width,"px"),height:"".concat(t.height,"px")},on:{click:function(e){t.onImageSearch(o),t.loadingIndex=r}}},[t.loadingIndex===r?e("div",{staticClass:"d-flex h-100"},[e("div",{class:["m-auto",t.$style.spinner]},[e("loading-small")],1)]):e("img",{class:["img-fluid",t.$style.image],attrs:{src:o.url,alt:o.name}})])})),0)}),[],!1,(function(t){this.$style=d.default.locals||d.default}),null,null);e.a=component.exports},3385:function(t,e,o){"use strict";o.r(e),o.d(e,"getBoundingBox",(function(){return n}));var r=(t,e,o,r)=>!!t[4*(r+o*e)+3],n=t=>{var{data:data,width:e,height:o}=t,n={top:null,left:null,right:null,bottom:null,width:null,height:null},c=0,l=0;for(c=o;!n.bottom&&c;)for(c--,l=0;l<e;l++)if(r(data,e,c,l)){n.bottom=c+1;break}for(c=0;!n.top&&c<n.bottom;){for(l=0;l<e;l++)if(r(data,e,c,l)){n.top=c-1,n.height=n.bottom-n.top-1;break}c++}for(l=e;!n.right&&l;)for(l--,c=0;c<o;c++)if(r(data,e,c,l)){n.right=l+1;break}for(l=0;!n.left&&l<n.right;){for(c=0;c<o;c++)if(r(data,e,c,l)){n.left=l,n.width=n.right-n.left-1;break}if(l++,n.left)return n}return{left:0,top:0,right:e,bottom:o,height:o,width:e}}},3386:function(t,e,o){var content=o(4696);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(42).default)("2ff6b34e",content,!0,{sourceMap:!1})},3387:function(t,e,o){var content=o(4698);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(42).default)("03bdccbc",content,!0,{sourceMap:!1})},3388:function(t,e,o){var content=o(4700);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(42).default)("b2067c64",content,!0,{sourceMap:!1})},4695:function(t,e,o){"use strict";var r=o(3386),n=o.n(r);o.d(e,"default",(function(){return n.a}))},4696:function(t,e,o){var r=o(41)(!1);r.push([t.i,".container_moOM3{width:688px;height:400px;background:#000;border-radius:12px}.container_moOM3 .spinner_onQX\\+{position:relative;height:100%;width:100%}.container_moOM3 .wrapper_QJEeC{position:relative;display:flex}.container_moOM3 .wrapper_QJEeC img{background:#fff;pointer-events:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.container_moOM3 .wrapper_QJEeC canvas{pointer-events:none}.container_moOM3 .wrapper_QJEeC .cropBox_xCzgY{position:absolute;border:1px solid #D8DBEB;border-radius:8px}.container_moOM3 .wrapper_QJEeC .cropControl_HM09k{position:absolute;top:-6px;left:-6px;cursor:all-scroll;width:100%;height:100%}.container_moOM3 .wrapper_QJEeC .corner_fPV28{position:absolute;width:48px;height:48px;overflow:hidden}.container_moOM3 .wrapper_QJEeC .corner_fPV28 .cornerInner_TAXeA{position:absolute;height:48px;width:48px;border:8px solid #D8DBEB;border-radius:16px}.container_moOM3 .wrapper_QJEeC .corner_fPV28.topLeftOuter_-znOB{cursor:nw-resize}.container_moOM3 .wrapper_QJEeC .corner_fPV28.topLeftOuter_-znOB .topLeftInner_FURbm{top:22px;left:22px}.container_moOM3 .wrapper_QJEeC .corner_fPV28.topRightOuter_UHyEU{cursor:ne-resize}.container_moOM3 .wrapper_QJEeC .corner_fPV28.topRightOuter_UHyEU .topRightInner_1ptgm{top:22px;right:22px}.container_moOM3 .wrapper_QJEeC .corner_fPV28.bottomLeftOuter_J4B6l{cursor:sw-resize}.container_moOM3 .wrapper_QJEeC .corner_fPV28.bottomLeftOuter_J4B6l .bottomLeftInner_tF49W{bottom:22px;left:22px}.container_moOM3 .wrapper_QJEeC .corner_fPV28.bottomRightOuter_l1tj4{cursor:se-resize}.container_moOM3 .wrapper_QJEeC .corner_fPV28.bottomRightOuter_l1tj4 .bottomRightInner_ZIAX7{bottom:22px;right:22px}.warning_bvH5M{font-size:12px;color:#DE524C;padding:0 1rem}\n",""]),r.locals={container:"container_moOM3",spinner:"spinner_onQX+",wrapper:"wrapper_QJEeC",cropBox:"cropBox_xCzgY",cropControl:"cropControl_HM09k",corner:"corner_fPV28",cornerInner:"cornerInner_TAXeA",topLeftOuter:"topLeftOuter_-znOB",topLeftInner:"topLeftInner_FURbm",topRightOuter:"topRightOuter_UHyEU",topRightInner:"topRightInner_1ptgm",bottomLeftOuter:"bottomLeftOuter_J4B6l",bottomLeftInner:"bottomLeftInner_tF49W",bottomRightOuter:"bottomRightOuter_l1tj4",bottomRightInner:"bottomRightInner_ZIAX7",warning:"warning_bvH5M"},t.exports=r},4697:function(t,e,o){"use strict";var r=o(3387),n=o.n(r);o.d(e,"default",(function(){return n.a}))},4698:function(t,e,o){var r=o(41)(!1);r.push([t.i,".container_KSOxT .wrapper_Wvhl7{display:flex;align-items:center;justify-content:center;height:400px;border:1px dashed #D8DBEB;border-radius:8px}.container_KSOxT .wrapper_Wvhl7.dragging_B4ELj{border:1px dashed #55AFE7}.container_KSOxT .wrapper_Wvhl7 .spinner_DHDbQ{position:relative;height:100%;width:100%}.container_KSOxT .wrapper_Wvhl7 .uploadInput_Gwssf:hover{text-decoration:none}.container_KSOxT .wrapper_Wvhl7 .uploadInput_Gwssf:active,.container_KSOxT .wrapper_Wvhl7 .uploadInput_Gwssf:focus{box-shadow:none !important}.container_KSOxT .wrapper_Wvhl7 .image_JHT7b{pointer-events:none}.container_KSOxT .wrapper_Wvhl7 .urlInput_oU\\+vd{position:relative;width:306px}.container_KSOxT .wrapper_Wvhl7 .urlInput_oU\\+vd .linkIcon_KSnFP{position:absolute;left:8px;top:8px}.container_KSOxT .wrapper_Wvhl7 .urlInput_oU\\+vd .form-control{padding-left:30px}.container_KSOxT .wrapper_Wvhl7 .urlInput_oU\\+vd .form-control:focus{box-shadow:0px 0px 0px 2px #ccf;border:1px solid #ccf !important}.container_KSOxT .wrapper_Wvhl7 .urlInput_oU\\+vd.invalid_lAd8G .form-control:focus{box-shadow:none;border:1px solid #DE524C !important}.container_KSOxT .wrapper_Wvhl7 .warning_DjAZV{font-size:12px;color:#DE524C;padding:0 1rem}.container_KSOxT .wrapper_Wvhl7 .informativeText_gVThC{font-size:12px;color:#737999;padding:0 1rem;text-align:center}@media (max-width: 575.98px){.container_KSOxT .wrapper_Wvhl7 .informativeText_gVThC{font-size:10px}}\n",""]),r.locals={container:"container_KSOxT",wrapper:"wrapper_Wvhl7",dragging:"dragging_B4ELj",spinner:"spinner_DHDbQ",uploadInput:"uploadInput_Gwssf",image:"image_JHT7b",urlInput:"urlInput_oU+vd",linkIcon:"linkIcon_KSnFP",invalid:"invalid_lAd8G",warning:"warning_DjAZV",informativeText:"informativeText_gVThC"},t.exports=r},4699:function(t,e,o){"use strict";var r=o(3388),n=o.n(r);o.d(e,"default",(function(){return n.a}))},4700:function(t,e,o){var r=o(41)(!1);r.push([t.i,".assetCard_TG53i{border-radius:8px;border:1px solid #EBEDF5;margin-right:.75rem;background:#F5F6FA;cursor:pointer;transition:all 0.3s ease}@media (max-width: 575.98px){.assetCard_TG53i{width:64px !important;height:64px !important}}.assetCard_TG53i .spinner_KyAbP{height:40px;width:40px}.assetCard_TG53i:hover{transform:scale(1.03);border-color:#B4BAD6}.assetCard_TG53i:last-child{margin-right:0}\n",""]),r.locals={assetCard:"assetCard_TG53i",spinner:"spinner_KyAbP"},t.exports=r},5293:function(t,e,o){"use strict";var r={props:{size:{type:String,default:"1em"}}},n=o(7),component=Object(n.a)(r,(function(){var t=this,e=t._self._c;return e("svg",t._b({staticClass:"ui-svg-inline",attrs:{width:t.size,height:t.size,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},"svg",t.$attrs,!1),[e("path",{attrs:{d:"M10,17.55,8.23,19.27a2.47,2.47,0,0,1-3.5-3.5l4.54-4.55a2.46,2.46,0,0,1,3.39-.09l.12.1a1,1,0,0,0,1.4-1.43A2.75,2.75,0,0,0,14,9.59a4.46,4.46,0,0,0-6.09.22L3.31,14.36a4.48,4.48,0,0,0,6.33,6.33L11.37,19A1,1,0,0,0,10,17.55ZM20.69,3.31a4.49,4.49,0,0,0-6.33,0L12.63,5A1,1,0,0,0,14,6.45l1.73-1.72a2.47,2.47,0,0,1,3.5,3.5l-4.54,4.55a2.46,2.46,0,0,1-3.39.09l-.12-.1a1,1,0,0,0-1.4,1.43,2.75,2.75,0,0,0,.23.21,4.47,4.47,0,0,0,6.09-.22l4.55-4.55A4.49,4.49,0,0,0,20.69,3.31Z"}})])}),[],!1,null,null,null);e.a=component.exports}}]);
